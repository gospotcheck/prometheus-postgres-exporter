pg_cache_hit:
  query: "SELECT sum(heap_blks_hit) / (sum(heap_blks_hit) + sum(heap_blks_read)) as ratio FROM pg_statio_user_tables;"
  metrics:
    - ratio:
        usage: "GAUGE"
        description: "Ratio of heap blocks hit to heap blocks read"

pg_replication:
  query: "SELECT extract(epoch from now() - pg_last_xact_replay_timestamp()) as delay_in_sec;"
  metrics:
    - delay_in_sec:
        usage: "GAUGE"
        description: "Seconds behind primary in commits"

pg_transactions:
  query: "SELECT sum(xact_commit+xact_rollback) as num_transactions FROM pg_stat_database;"
  metrics:
    - num_transactions:
        usage: "GAUGE"
        description: "Number of transactions at time of query"    
